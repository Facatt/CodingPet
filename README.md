# CodingPet - ç¨‹åºå‘˜é™ªä¼´å¸ˆ ğŸ¾

ä¸€ä¸ª VSCode æ¡Œé¢å® ç‰©æ’ä»¶ï¼Œå†…ç½®å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆGPT-4oï¼‰ï¼Œä»¥å¯çˆ±çš„å¡é€šå½¢è±¡é™ªä¼´ä½ å†™ä»£ç ã€èŠå¤©ã€æé†’ä¼‘æ¯ã€‚

![VSCode](https://img.shields.io/badge/VSCode-^1.85.0-blue)
![TypeScript](https://img.shields.io/badge/TypeScript-5.3-blue)
![Electron](https://img.shields.io/badge/Electron-28-blue)
![License](https://img.shields.io/badge/License-MIT-green)

---

## åŠŸèƒ½æ¦‚è§ˆ

### ğŸ¾ æ¡Œé¢å® ç‰©

- **ç‹¬ç«‹æ‚¬æµ®çª—**ï¼šå® ç‰©ä»¥é€æ˜æ— è¾¹æ¡†çª—å£æ‚¬æµ®åœ¨æ¡Œé¢ä¸Šï¼Œå§‹ç»ˆç½®é¡¶ï¼Œä¸é®æŒ¡æ“ä½œ
- **é¼ æ ‡æ‹–æ‹½ç§»åŠ¨**ï¼šæ‹–æ‹½å® ç‰©åˆ°å±å¹•ä»»æ„ä½ç½®ï¼Œå…³é—­åè®°å¿†ä½ç½®
- **3 ç§å†…ç½®è§’è‰²**ï¼šèŒå¦¹ã€å°çŒ«ã€å°ç‹—ï¼Œå‡ä¸º Canvas å®æ—¶ç»˜åˆ¶çš„å¡é€šå½¢è±¡
- **è‡ªå®šä¹‰è§’è‰²**ï¼šæ”¯æŒä¸Šä¼ æœ¬åœ°å›¾ç‰‡ä½œä¸ºå® ç‰©å½¢è±¡
- **è¡¨æƒ…åŠ¨ç”»**ï¼š6 ç§æƒ…ç»ªçŠ¶æ€ï¼ˆå¼€å¿ƒã€æ‹…å¿ƒã€å¹³é™ã€ç”Ÿæ°”ã€å…´å¥‹ã€æ€è€ƒï¼‰ï¼Œæ ¹æ®å¯¹è¯å†…å®¹è‡ªåŠ¨åˆ‡æ¢

### ğŸ’¬ æ™ºèƒ½å¯¹è¯

- **å¤šæ¨¡æ€å¤§æ¨¡å‹**ï¼šåŸºäº OpenAI GPT-4oï¼Œæ”¯æŒæ–‡æœ¬ã€è¯­éŸ³ã€å›¾åƒä¸‰ç§è¾“å…¥
- **ä»£ç ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šè‡ªåŠ¨è¯»å–å½“å‰æ‰“å¼€çš„æ–‡ä»¶ã€å…‰æ ‡ä½ç½®ã€æœ€è¿‘ä¿®æ”¹ã€è¯Šæ–­ä¿¡æ¯ï¼Œå¯¹è¯æ—¶æ— éœ€æ‰‹åŠ¨ç²˜è´´ä»£ç 
- **é™ªä¼´å¸ˆäººè®¾**ï¼šæ¸©æš–ã€å¹½é»˜ã€ä¸“ä¸šçš„ç¼–ç¨‹ä¼™ä¼´ï¼Œä¸åªæ˜¯å†·å†°å†°çš„ AI åŠ©æ‰‹
- **å¯¹è¯å†å²è®°å¿†**ï¼šè·¨ä¼šè¯ä¿å­˜èŠå¤©è®°å½•

### ğŸ”Š è¯­éŸ³ç³»ç»Ÿ

- **5 ç§å†…ç½®è¯­éŸ³åŒ…**ï¼š
  | è¯­éŸ³åŒ… | é£æ ¼ | å¾®è½¯è¯­éŸ³å¼•æ“ |
  |--------|------|-------------|
  | èŒå¦¹ | ç”œç¾å¯çˆ± | æ™“æ™“ (XiaoxiaoNeural) |
  | å¾¡å§ | æˆç†Ÿä¼˜é›… | æ™“é¢œ (XiaoyanNeural) |
  | å°å¦¹ | æ¸©æŸ”å°æ¹¾è…” | æ›‰è‡» (HsiaoChenNeural) |
  | ç”·çƒŸå—“ | ä½æ²‰ç£æ€§ | äº‘å¸Œ (YunxiNeural) |
  | ç”·æ°”æ³¡éŸ³ | æ´»åŠ›é’æ˜¥ | äº‘å¥ (YunjianNeural) |
- **Edge TTS**ï¼šé»˜è®¤è¯­éŸ³åˆæˆå¼•æ“ï¼Œå…è´¹æ— éœ€ API Key
- **Fish Speech å£°çº¹å…‹éš†**ï¼šå¯é€‰æ¥å…¥æœ¬åœ° Fish Speech æœåŠ¡ï¼Œä¸Šä¼ ä¸€æ®µå‚è€ƒéŸ³é¢‘å³å¯å…‹éš†å£°çº¹
- **è¯­éŸ³è¾“å…¥**ï¼šæŒ‰ä½éº¦å…‹é£æŒ‰é’®å½•éŸ³ï¼Œé€šè¿‡ OpenAI Whisper API è½¬æ–‡å­—

### ğŸ¤– ä¸»åŠ¨äº¤äº’

- **ä»£ç ç¼–å†™æç¤º**ï¼šç›‘å¬ä½ çš„ä»£ç å˜æ›´ï¼Œåœ¨åˆé€‚çš„æ—¶æœºç»™å‡ºå»ºè®®ï¼ˆæ½œåœ¨ bugã€å‘½åæ”¹è¿›ã€é€»è¾‘ç–‘é—®ç­‰ï¼‰
- **ä¹…åæé†’**ï¼šè®°å½•è¿ç»­ç¼–ç æ—¶é—´ï¼Œå®šæ—¶æé†’ä½ èµ·æ¥æ´»åŠ¨ï¼ˆé»˜è®¤ 45 åˆ†é’Ÿï¼Œå¯è‡ªå®šä¹‰ï¼‰
- **æ–°é—»æ’­æŠ¥**ï¼šå®šæ—¶è·å– Hacker News ç­‰ç§‘æŠ€æ–°é—»ï¼Œç”± AI æ€»ç»“åæ’­æŠ¥
- **éšæœºèŠå¤©**ï¼šå¶å°”é—®é—®ä½ å¿ƒæƒ…æ€æ ·ã€åˆ†äº«äººç”Ÿå“²ç†ã€ç¼–ç¨‹å†·çŸ¥è¯†ã€è¶£å‘³å°æ•…äº‹

---

## æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    WebSocket     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VSCode Extension Host â”‚ â—„â”€â”€(localhost)â”€â”€â–º â”‚  Electron Desktop Overlayâ”‚
â”‚                         â”‚                   â”‚                          â”‚
â”‚  â”œâ”€ AI Service (GPT-4o) â”‚                   â”‚  â”œâ”€ Pet Canvas Renderer  â”‚
â”‚  â”œâ”€ Code Context Serviceâ”‚                   â”‚  â”œâ”€ Chat Panel UI        â”‚
â”‚  â”œâ”€ TTS Manager         â”‚                   â”‚  â”œâ”€ Emotion Engine       â”‚
â”‚  â”œâ”€ Proactive Scheduler â”‚                   â”‚  â”œâ”€ Voice Input/Output   â”‚
â”‚  â””â”€ WebSocket Server    â”‚                   â”‚  â””â”€ WebSocket Client     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                              â”‚
         â–¼                                              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  OpenAI API  â”‚                              â”‚  Audio Player â”‚
  â”‚  Edge TTS    â”‚                              â”‚  (Web Audio)  â”‚
  â”‚  Fish Speech â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚  News RSS    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é€šä¿¡æ–¹å¼**ï¼šVSCode æ’ä»¶ä¸æ¡Œé¢å® ç‰©çª—å£ä¹‹é—´é€šè¿‡ WebSocketï¼ˆlocalhost éšæœºç«¯å£ï¼‰åŒå‘å®æ—¶é€šä¿¡ã€‚

---

## å®‰è£…ä¸ä½¿ç”¨

### å‰ç½®è¦æ±‚

- **Node.js** >= 18
- **VSCode** >= 1.85.0
- **OpenAI API Key**ï¼ˆç”¨äº GPT-4o å¯¹è¯å’Œ Whisper è¯­éŸ³è¯†åˆ«ï¼‰

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/Facatt/CodingPet.git
cd CodingPet

# 2. å®‰è£…ä¸»æ’ä»¶ä¾èµ–
npm install

# 3. å®‰è£… Electron overlay ä¾èµ–
cd overlay
npm install
cd ..

# 4. æ„å»ºä¸»æ’ä»¶
npm run build

# 5. æ„å»ºæ¡Œé¢å® ç‰© overlay
node scripts/build-overlay.js
```

### å¼€å‘è°ƒè¯•

```bash
# æ–¹å¼ä¸€ï¼šåœ¨ VSCode ä¸­æŒ‰ F5 å¯åŠ¨æ’ä»¶å¼€å‘å®¿ä¸»æœº
# æ–¹å¼äºŒï¼šä½¿ç”¨ watch æ¨¡å¼
npm run watch        # ç›‘å¬ä¸»æ’ä»¶æºç å˜æ›´
cd overlay && npm run dev  # ç›‘å¬ overlay æºç å˜æ›´
```

### é…ç½® API Key

æ’ä»¶å¯åŠ¨åï¼Œé€šè¿‡ä»¥ä¸‹ä»»ä¸€æ–¹å¼é…ç½®ï¼š

1. **å‘½ä»¤é¢æ¿**ï¼š`Ctrl+Shift+P` â†’ è¾“å…¥ `CodingPet: è®¾ç½®`
2. **VSCode è®¾ç½®**ï¼šæœç´¢ `codingpet` â†’ å¡«å†™ `OpenAI API Key`
3. **settings.json**ï¼š
   ```json
   {
     "codingpet.openaiApiKey": "sk-your-key-here",
     "codingpet.openaiBaseUrl": "https://api.openai.com/v1"
   }
   ```

> æ”¯æŒé…ç½®è‡ªå®šä¹‰ Base URLï¼Œå¯æ¥å…¥ OpenAI ä»£ç†æˆ–å…¼å®¹ APIã€‚

---

## å‘½ä»¤åˆ—è¡¨

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `CodingPet: å¯åŠ¨é™ªä¼´å¸ˆ` | å¯åŠ¨æ¡Œé¢å® ç‰© |
| `CodingPet: å…³é—­é™ªä¼´å¸ˆ` | å…³é—­æ¡Œé¢å® ç‰© |
| `CodingPet: æ‰“å¼€èŠå¤©` | æ‰“å¼€èŠå¤©é¢æ¿ |
| `CodingPet: åˆ‡æ¢è§’è‰²` | é€‰æ‹©èŒå¦¹/å°çŒ«/å°ç‹—/è‡ªå®šä¹‰ |
| `CodingPet: åˆ‡æ¢è¯­éŸ³åŒ…` | é€‰æ‹©è¯­éŸ³é£æ ¼ |
| `CodingPet: è®¾ç½®` | æ‰“å¼€æ’ä»¶è®¾ç½® |

---

## é…ç½®é¡¹

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `codingpet.openaiApiKey` | string | `""` | OpenAI API Key |
| `codingpet.openaiBaseUrl` | string | `https://api.openai.com/v1` | API åœ°å€ï¼ˆæ”¯æŒä»£ç†ï¼‰ |
| `codingpet.character` | enum | `cute-girl` | è§’è‰²ï¼šcute-girl / cat / dog / custom |
| `codingpet.voicePack` | enum | `cute-girl` | è¯­éŸ³åŒ… |
| `codingpet.ttsProvider` | enum | `edge-tts` | TTS å¼•æ“ï¼šedge-tts / fish-speech |
| `codingpet.fishSpeechUrl` | string | `http://localhost:8080` | Fish Speech æœåŠ¡åœ°å€ |
| `codingpet.healthReminderInterval` | number | `45` | ä¹…åæé†’é—´éš”ï¼ˆåˆ†é’Ÿï¼‰ |
| `codingpet.enableCodeTips` | boolean | `true` | å¯ç”¨ä»£ç ç¼–å†™æç¤º |
| `codingpet.enableNewsBroadcast` | boolean | `true` | å¯ç”¨æ–°é—»æ’­æŠ¥ |
| `codingpet.enableProactiveChat` | boolean | `true` | å¯ç”¨ä¸»åŠ¨èŠå¤© |
| `codingpet.enableVoiceOutput` | boolean | `true` | å¯ç”¨è¯­éŸ³è¾“å‡º |
| `codingpet.customCharacterPath` | string | `""` | è‡ªå®šä¹‰è§’è‰²å›¾ç‰‡è·¯å¾„ |
| `codingpet.customVoicePath` | string | `""` | å£°çº¹å‚è€ƒéŸ³é¢‘è·¯å¾„ |

---

## å£°çº¹å…‹éš†ï¼ˆå¯é€‰ï¼‰

å¦‚æœæƒ³ä½¿ç”¨è‡ªå®šä¹‰å£°éŸ³ï¼Œå¯ä»¥æ¥å…¥ [Fish Speech](https://github.com/fishaudio/fish-speech) æœ¬åœ°æœåŠ¡ï¼š

```bash
# 1. å®‰è£… Fish Speechï¼ˆå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼‰
# 2. å¯åŠ¨æœåŠ¡
python -m fish_speech.serve --listen 0.0.0.0:8080

# 3. åœ¨ CodingPet è®¾ç½®ä¸­é…ç½®
# codingpet.ttsProvider â†’ fish-speech
# codingpet.fishSpeechUrl â†’ http://localhost:8080
# codingpet.customVoicePath â†’ é€‰æ‹©ä¸€æ®µ 5-10 ç§’çš„å‚è€ƒéŸ³é¢‘æ–‡ä»¶
```

---

## é¡¹ç›®ç»“æ„

```
CodingPet/
â”œâ”€â”€ package.json                 # VSCode æ’ä»¶æ¸…å•
â”œâ”€â”€ tsconfig.json                # TypeScript é…ç½®
â”œâ”€â”€ webpack.config.js            # Webpack æ‰“åŒ…é…ç½®
â”œâ”€â”€ src/                         # æ’ä»¶æºç 
â”‚   â”œâ”€â”€ extension.ts             # å…¥å£ï¼šæ¿€æ´»/åœç”¨/äº‹ä»¶ç»‘å®š
â”‚   â”œâ”€â”€ config.ts                # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ ai-service.ts        # OpenAI GPT-4o å¤šæ¨¡æ€è°ƒç”¨
â”‚   â”‚   â”œâ”€â”€ code-context.ts      # ç¼–è¾‘å™¨ä»£ç ä¸Šä¸‹æ–‡æå–
â”‚   â”‚   â”œâ”€â”€ conversation-manager.ts  # å¯¹è¯å†å²ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ emotion-analyzer.ts  # æƒ…ç»ªåˆ†æ
â”‚   â”‚   â””â”€â”€ prompt-builder.ts    # ç³»ç»Ÿæç¤ºè¯ä¸æƒ…ç»ªè§£æ
â”‚   â”œâ”€â”€ tts/
â”‚   â”‚   â”œâ”€â”€ tts-manager.ts       # TTS è°ƒåº¦ï¼ˆè‡ªåŠ¨é™çº§ï¼‰
â”‚   â”‚   â”œâ”€â”€ edge-tts-provider.ts # Edge TTS å°è£…
â”‚   â”‚   â””â”€â”€ fish-speech-provider.ts  # Fish Speech å°è£…
â”‚   â”œâ”€â”€ proactive/
â”‚   â”‚   â”œâ”€â”€ scheduler.ts         # ä¸»åŠ¨äº¤äº’ç»Ÿä¸€è°ƒåº¦
â”‚   â”‚   â”œâ”€â”€ code-watcher.ts      # ä»£ç å˜æ›´ç›‘å¬
â”‚   â”‚   â”œâ”€â”€ health-reminder.ts   # ä¹…åæé†’
â”‚   â”‚   â””â”€â”€ news-fetcher.ts      # æ–°é—»è·å–
â”‚   â”œâ”€â”€ ipc/
â”‚   â”‚   â”œâ”€â”€ ws-server.ts         # WebSocket æœåŠ¡ç«¯
â”‚   â”‚   â””â”€â”€ messages.ts          # IPC æ¶ˆæ¯ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ webview/
â”‚       â””â”€â”€ settings-panel.ts    # è®¾ç½®é¢æ¿
â”œâ”€â”€ overlay/                     # Electron æ¡Œé¢å® ç‰©
â”‚   â”œâ”€â”€ main.ts                  # ä¸»è¿›ç¨‹ï¼ˆé€æ˜çª—å£ï¼‰
â”‚   â”œâ”€â”€ preload.ts               # é¢„åŠ è½½ï¼ˆIPC æ¡¥æ¥ï¼‰
â”‚   â””â”€â”€ renderer/
â”‚       â”œâ”€â”€ index.html           # é¡µé¢ç»“æ„
â”‚       â”œâ”€â”€ app.js               # æ¸²æŸ“é€»è¾‘ï¼ˆè§’è‰²/èŠå¤©/è¯­éŸ³/åŠ¨ç”»ï¼‰
â”‚       â””â”€â”€ styles/              # CSS æ ·å¼
â”œâ”€â”€ assets/                      # é™æ€èµ„æº
â””â”€â”€ scripts/                     # æ„å»ºè„šæœ¬
```

---

## æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| VSCode æ’ä»¶ | TypeScript + Webpack |
| æ¡Œé¢å® ç‰©çª—å£ | Electronï¼ˆé€æ˜æ— è¾¹æ¡†ç½®é¡¶çª—å£ï¼‰ |
| è§’è‰²ç»˜åˆ¶ | HTML5 Canvas 2D å®æ—¶ç»˜åˆ¶ |
| è¿›ç¨‹é€šä¿¡ | WebSocket (localhost) |
| AI å¯¹è¯ | OpenAI GPT-4o |
| è¯­éŸ³è¯†åˆ« | OpenAI Whisper |
| è¯­éŸ³åˆæˆ | Edge TTS (node-edge-tts) + Fish Speech |
| è¯­éŸ³å½•å…¥ | Web MediaRecorder API |
| éŸ³é¢‘æ’­æ”¾ | Web Audio API |

---

## å¸¸è§é—®é¢˜

**Q: å® ç‰©çª—å£æ²¡æœ‰å‡ºç°ï¼Ÿ**
> ç¡®ä¿ overlay å·²æ„å»ºï¼ˆ`node scripts/build-overlay.js`ï¼‰ï¼Œä¸” `overlay/node_modules` ä¸­å®‰è£…äº† Electronã€‚

**Q: æç¤º API Key æœªé…ç½®ï¼Ÿ**
> åœ¨ VSCode è®¾ç½®ä¸­æœç´¢ `codingpet.openaiApiKey` å¡«å…¥ä½ çš„ OpenAI Keyã€‚æ”¯æŒé…ç½®ä»£ç† Base URLã€‚

**Q: Edge TTS è¯­éŸ³ä¸å·¥ä½œï¼Ÿ**
> Edge TTS éœ€è¦ç½‘ç»œè¿æ¥ï¼ˆè°ƒç”¨å¾®è½¯åœ¨çº¿æœåŠ¡ï¼‰ã€‚å¦‚æœç½‘ç»œå—é™ï¼Œå¯ä»¥å®‰è£… Python ç‰ˆ `pip install edge-tts` ä½œä¸º CLI é™çº§æ–¹æ¡ˆã€‚

**Q: å¦‚ä½•å…³é—­ä¸»åŠ¨æ‰“æ‰°åŠŸèƒ½ï¼Ÿ**
> åœ¨è®¾ç½®ä¸­å…³é—­å¯¹åº”å¼€å…³ï¼š`codingpet.enableCodeTips`ã€`codingpet.enableNewsBroadcast`ã€`codingpet.enableProactiveChat`ã€‚

**Q: æ”¯æŒå“ªäº› OpenAI å…¼å®¹ APIï¼Ÿ**
> ä»»ä½•å…¼å®¹ OpenAI Chat Completions API æ ¼å¼çš„æœåŠ¡å‡å¯ä½¿ç”¨ï¼Œä¿®æ”¹ `codingpet.openaiBaseUrl` å³å¯ã€‚

---

## License

MIT
